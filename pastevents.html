<!DOCTYPE html>
<html lang="es-AR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&amp;_cacheOverride=1759272061882" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link rel="icon" href="assets/images/icon.png" type="image/x-icon">
  <title>ÚLTIMOS EVENTOS | Gabba</title>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const savedMode = localStorage.getItem('darkMode');
      if (savedMode === 'off') {
        document.body.classList.remove('dark-mode');
      }
    });
  </script>
</head>
<body class="past-events dark-mode">
  <main>
    <h2 class="past-events-title">ÚLTIMOS EVENTOS</h2>
    <section class="past-events-section">
    </section>
  </main>
  <div class="image-overlay" id="imageOverlay">
    <span class="close-btn material-symbols-rounded" id="closeBtn">close_small</span>
    <img src="" alt="Imagen ampliada" class="overlay-img" id="overlayImg">
  </div>
  <footer>
    © 2025 FIESTA RAMONA
  </footer>
  <nav>
    <div class="nav-wrapper">
      <a href="#" class="icon-active">
        <span class="material-symbols-rounded">event_repeat</span>
        <span>Eventos</span>
      </a>
      <a href="news.html">
        <span class="material-symbols-rounded">newspaper</span>
        <span>Noticias</span>
      </a>
      <a href="index.html">
        <span class="material-symbols-rounded">home
        </span>
        <span>Inicio</span>
      </a>
      <a href="links.html">
        <span class="material-symbols-rounded">link</span>
        <span>Links</span>
      </a>
      <a href="settings.html">
        <span class="material-symbols-rounded">settings</span>
        <span>Opciones</span>
      </a>
    </div>
  </nav>
  <script>
    async function cargarEventosPasados() {
      const contenedor = document.querySelector('.past-events-section');
      try {
        const response = await fetch('https://gabbaapp.s3.us-east-1.amazonaws.com/pastevents.json?t=' + Date.now());
        const eventos = await response.json();

        contenedor.innerHTML = '';

        eventos.forEach(evento => {
          const eventoDiv = document.createElement('div');
          eventoDiv.classList.add('past-events-event');

          let galeriaHTML = '';
          let creditosHTML = '';
          if (evento.galeria && evento.galeria.length > 0) {
            galeriaHTML = `
          <div class="swiper past-events-swiper">
            <div class="swiper-wrapper">
              ${evento.galeria.map(url => `
                <div class="swiper-slide"><img src="${url}" alt=""></div>
              `).join('')}
            </div>
            <div class="swiper-pagination"></div>
          </div>
        `;
          }

          if (evento.creditos) {
            creditosHTML = `<p class="past-events-credits">Créditos a ${evento.creditos}</p>`;
          }

          eventoDiv.innerHTML = `
        <img src="${evento.imagen}" alt="${evento.nombre}" class="past-events-flyer">
        <h3 class="past-events-name">${evento.nombre}</h3>
        <p class="past-events-date">${evento.fecha}</p>
        ${evento.videoResumen ? `<a href="${evento.videoResumen}" target="_blank" style="display:flex;align-items:center;gap:10px;text-decoration:none;font-family:'Oswald'"><img src="https://img.icons8.com/?size=100&id=31939&format=png&color=000000" class="past-events-icon"><p>VER RESUMEN EN YOUTUBE</p></a>` : ''}
        <p class="past-events-description">${evento.descripcion}</p>
        ${galeriaHTML}
        ${creditosHTML}
      `;

          contenedor.appendChild(eventoDiv);
        });

        document.querySelectorAll('.past-events-swiper').forEach(swiperEl => {
          new Swiper(swiperEl, {
            loop: false,
            pagination: {
              el: swiperEl.querySelector('.swiper-pagination'),
              clickable: true
            }
          });
        });

      } catch (error) {
        console.error('Error cargando eventos pasados:', error);
      }
    }

    document.addEventListener('DOMContentLoaded', cargarEventosPasados);
  </script>
  <script src="js/overlay.js"></script>
</body>
</html>